如果你是一名 HUST AIAer，你有很大概率获得到了前辈用 bc 造的轮子“汉字库”。本文将从零解释其实现原理。

## 汉字编码

### ANSI 原理

在课堂学习中我们已经了解过 ASCII 码，它占用一个字节，使用7位信息存储了拉丁字母和一些必要的符号。

ASCII-only 是时代发展的无奈。ANSI 编码摆脱单个字节对字符编码的限制，我们可以使用多个字节存储字符，以完成对 ASCII 字符集的拓展。

完整使用两个字节存储字符，理论上我们最多可以实现

$$
    2^{8} \times 2^{8} = 2^{16} = 65536
$$

个字符。

为了保证对 ASCII 的兼容，只能使用高1位为1时的低7位，即 `0x80`~`0xFF`，使用的编码称之为内码。理论上最多可以添加

$$
    2^{7} \times 2^{7} = 2^{14} = 16384
$$

个新字符，这已远远超过常用汉字的数量。

GB2312 收入汉字6763个和非汉字图形字符682个，字库大小适中，AIAer 祖传的“汉字库”与本文都使用此编码存储汉字。

### GB2312 编码方式

GB2312 对汉字进行了分区处理，每个区含有 94 个汉字或者字符，总共有 94 个区，每个汉字或者字符都对应一个 分区编号和分区内的位置编号，称为区位码。

区位码对应字符含义如下：
* 01-09区为特殊符号。
* 16-55区为一级汉字，按拼音排序。
* 56-87区为二级汉字，按部首/笔画排序。
* 10-15区及88-94区则未有编码。

GB2312 使用了与上文相同的；两字节存储方式，字符的两个字节分别存储了区码和位码。

而区位码对应的字节内容并不是从 `0x80` 开始的，而是 `0xA0`。因历史原因这二者之间还有一次国标码的转换，在此不再赘述。

综上，以“中”字为例，其区码为54，位码为48。

$$
    54 + (A0)_{16} = (D6)_{16} \newline
    48 + (A0)_{16} = (D0)_{16}
$$

则其 GB2312 编码为 `0xD6` `0xD0`。

### 使用对应编码

当你在你所使用的代码编辑器内输入汉字时，这个汉字便以选定的编码方式存储在源代码文件中。

默认情况下，现代代码编辑器都会使用 UTF-8 作为默认编码。你可以在设置/工作区设置中将默认编码改为 GB2312。

## 点阵字体